
# make 단계 발생하는 오류 
`[Makefile:146: all] Error 2` 오류는 `make` 실행 중에 발생한 문제로, 보통 빌드 과정에서 특정 명령이 실패했을 때 나타납니다. 이 오류의 원인을 찾기 위해 다음과 같은 방법으로 문제를 진단할 수 있습니다.  

---

### 1. **상세 오류 메시지 확인**
오류 메시지가 더 있는지 확인하세요. 보통 `Error 2` 앞쪽에 실패한 명령과 관련된 자세한 로그가 출력됩니다.  

```sh
make VERBOSE=1
```
또는  
```sh
make -j$(nproc) 2>&1 | tee build.log
```
위 명령을 사용하여 전체 빌드 로그를 파일(`build.log`)에 저장하고 분석할 수도 있습니다.  

---

### 2. **디버그 모드 활성화 (`make`의 `-d` 옵션 사용)**
Makefile 내부에서 어떤 과정이 실행되었는지 상세하게 확인하려면 `-d` 옵션을 추가하세요.  

```sh
make -d
```
출력된 로그에서 `Error 2`가 발생하기 전에 어떤 명령이 실행되었는지 확인하고, 실패한 부분을 분석하면 됩니다.  

---

### 3. **Makefile 146번째 줄 확인**
오류 메시지에서 `Makefile:146`이라고 되어 있으므로 `Makefile`의 146번째 줄을 직접 확인하여 문제가 있는지 살펴보세요.  

```sh
sed -n '146p' Makefile
```
또는 직접 `Makefile`을 열어 해당 줄을 확인하세요. 이 부분이 `all` 대상과 관련된 규칙을 포함하고 있을 가능성이 큽니다.  

---

### 4. **`CMakeLists.txt` 확인 및 Makefile 다시 생성**
CMake를 사용하여 Makefile을 생성한 경우, `CMakeLists.txt`에서 잘못된 설정이 있을 수도 있습니다.  

1. 기존 빌드 디렉토리를 삭제하고 다시 생성  
    ```sh
    rm -rf build
    mkdir build
    cd build
    cmake ..
    make
    ```
2. CMake 캐시를 삭제하고 다시 설정  
    ```sh
    cmake --fresh ..
    make
    ```
3. `CMakeLists.txt`에서 오류가 없는지 확인  
   - 존재하지 않는 파일을 컴파일하려 하거나  
   - 경로가 잘못 지정된 경우 발생할 수 있음  

---

### 5. **의존성 라이브러리 확인**
빌드 과정에서 필요한 라이브러리가 누락된 경우 발생할 수 있습니다. 다음 명령으로 필요한 라이브러리가 설치되어 있는지 확인하세요.  

```sh
ldd <실행파일_또는_라이브러리> | grep "not found"
```
또한, `pkg-config`를 사용하여 필요한 라이브러리가 제대로 설치되었는지 확인할 수도 있습니다.  

```sh
pkg-config --modversion <라이브러리_이름>
```

---

### 6. **`make` 병렬 빌드 문제 확인**
여러 개의 스레드(`-j` 옵션)를 사용하여 빌드할 때 `Error 2`가 발생할 수 있습니다.  

```sh
make -j1
```
병렬 빌드를 해제하고 실행하면, 오류가 어디에서 발생하는지 더 명확하게 확인할 수 있습니다.  

---

### 7. **컴파일러 버전 및 환경 확인**
컴파일러 버전이 맞지 않거나, `CMakeLists.txt`에서 특정한 컴파일러 옵션이 필요한 경우도 있습니다. 다음 명령으로 환경을 확인하세요.  

```sh
gcc --version  # 또는 clang --version
cmake --version
```

---

위 방법들을 순서대로 확인하면서 `Error 2`의 원인을 찾으면 문제를 해결할 수 있을 것입니다. 오류 메시지의 더 많은 정보를 공유해 주시면 추가로 분석해 드릴 수 있습니다. 😊